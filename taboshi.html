<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>taboshi on base $taboshi price today & charts toadgang.xyz</title>
    <meta name="description" content="$taboshi is the leaf of yield & the key to unlock sacred rites in tobyworld. check taboshi price, marketcap, liquidity pools, holders & charts.">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://toadgang.xyz/taboshi">
    <meta property="og:title" content="taboshi on base $taboshi price today & charts toadgang.xyz">
    <meta property="og:description" content="$taboshi is the leaf of yield & the key to unlock sacred rites in tobyworld. check taboshi price, marketcap, liquidity pools, holders & charts.">
    <meta property="og:image" content="/open.png">

    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://toadgang.xyz/taboshi">
    <meta property="twitter:title" content="taboshi on base $taboshi price today & charts toadgang.xyz">
    <meta property="twitter:description" content="$taboshi is the leaf of yield & the key to unlock sacred rites in tobyworld. check taboshi price, marketcap, liquidity pools, holders & charts.">
    <meta property="twitter:image" content="/open.png">
    <meta name="twitter:site" content="@toadgang7">
    
    <meta property="article:published_time" content="2025-09-01T00:00:00Z" />
    <meta property="article:modified_time" content="2025-09-01T00:00:00Z" />

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0000ff;
            color: #0d43ae;
        }
        .page-wrapper { background-color: #0000ff; }
        #hero-section { height: 350px; position: relative; display: flex; align-items: center; justify-content: center; text-align: center; color: white; overflow: hidden; }
        .video-container { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 120vw; height: 120vh; max-width: none; z-index: 1; border-radius: 50%; overflow: hidden; border: none !important; outline: none !important; background-color: #0000ff; }
        #hero-video { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 900px; height: 350px; object-fit: cover; filter: brightness(0.8); border-radius: 50%; border: none !important; outline: none !important; z-index: 0; }
        .video-overlay { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 920px; height: 370px; border-radius: 50%; box-shadow: rgb(0, 0, 255) 0px -80px 150px 30px inset, rgb(0, 0, 255) 0px 80px 150px 30px inset, rgb(0, 0, 255) -10px 0px 50px 5px inset, rgb(0, 0, 255) 10px 0px 50px 5px inset; z-index: 1; }
        .hero-content { position: relative; z-index: 3; padding: 1rem; }
        .hero-btn { background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); font-weight: bold; padding: 0.5rem 0.75rem; border-radius: 0.5rem; transition: all 0.3s ease; }
        .hero-btn:hover { background: rgba(255, 255, 255, 0.2); border-color: rgba(255, 255, 255, 0.4); transform: translateY(-2px); }
        .typing-container .cursor { display: inline-block; background-color: white; margin-left: 0.1rem; width: 3px; animation: blink 1s infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
        .positive-change { color: #16a34a; }
        .negative-change { color: #dc2626; }
        .stat-card { background-color: #a8c5ff; border-radius: 25px; border: 1px solid rgba(255, 255, 255, 0.6); padding: 1.5rem; margin-bottom: 1.5rem; box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1); position: relative; overflow: hidden; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .stat-card:hover { transform: translateY(-4px); box-shadow: 0 25px 45px rgba(0, 0, 0, 0.15); }
        .stat-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px; background: linear-gradient(90deg, transparent, rgba(59, 170, 255, 0.7), transparent); }
        .stat-card::after { content: 'toadgang.xyz'; position: absolute; top: 1rem; right: 1.5rem; font-size: 1rem; font-weight: 700; color: rgba(13, 67, 174, 0.2); z-index: 0; pointer-events: none; }
        #final-summary-section::after { top: auto; bottom: 1rem; }
        .stat-card > * { position: relative; z-index: 1; }
        .btn-group { display: flex; gap: 0.5rem; flex-wrap: wrap; justify-content: center; margin: 1rem 0; border-top: 1px solid rgba(255, 255, 255, 0.5); border-bottom: 1px solid rgba(255, 255, 255, 0.5); padding: 1rem 0; }
        .timeframe-btn { padding: 0.5rem 1rem; background: rgba(255, 255, 255, 0.3); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.4); border-radius: 1rem; color: #0d43ae; font-weight: 500; cursor: pointer; transition: all 0.3s ease-in-out; position: relative; overflow: hidden; }
        .timeframe-btn::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent); transition: left 0.5s; }
        .timeframe-btn:hover::before { left: 100%; }
        .timeframe-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1); }
        .timeframe-btn.active { background: #0d43ae; border-color: #0d43ae; color: white; box-shadow: 0 4px 15px rgba(13, 67, 174, 0.3); }
        .data-box { background-color: #c5d9ff; backdrop-filter: blur(15px); padding: 0.75rem; border-radius: 15px; border: 1px solid rgba(255, 255, 255, 0.6); transition: all 0.3s ease; }
        .data-box:hover { transform: translateY(-2px); box-shadow: 0 8px 12px rgba(0,0,0,0.1); }
        .copy-btn { margin-right: 0.5rem; background: rgba(255, 255, 255, 0.3); border: 1px solid rgba(255, 255, 255, 0.4); padding: 0.25rem; border-radius: 0.5rem; transition: all 0.2s ease-in-out; }
        .copy-btn:hover { background: rgba(255, 255, 255, 0.7); }
        .glow-blue { box-shadow: 0 0 25px rgba(59, 170, 255, 0.5); }
        .glow-green { box-shadow: 0 0 25px rgba(22, 163, 74, 0.5); }
        .glow-red { box-shadow: 0 0 25px rgba(220, 38, 38, 0.5); }
        .buy-btn { background: #0d43ae; color: white; padding: 0.5rem 1rem; border-radius: 0.75rem; font-weight: 600; text-align: center; transition: all 0.3s ease; display: inline-block; }
        .buy-btn:hover { background: #3baaff; transform: translateY(-2px); box-shadow: 0 4px 15px rgba(13, 67, 174, 0.4); }
        #qa-section, #qa-section h2, #qa-section h3, #qa-section p { text-transform: none; }
        .dark-blue-title-box { background-color: rgba(0, 0, 0, 0.4); color: white; padding: 0.75rem 1.5rem; border-radius: 0.75rem; border: 1px solid rgba(255, 255, 255, 0.1); text-align: center; }
    </style>
</head>
<body class="p-0">

<div class="page-wrapper pt-2">
    <div class="container mx-auto max-w-5xl"> 
        <nav class="p-2 flex justify-center items-center text-white">
            <div class="hidden md:flex space-x-8">
                <a href="index.html" class="hover:text-gray-300">$toby</a>
                <a href="taboshi.html" class="hover:text-gray-300">$taboshi</a>
                <a href="patience.html" class="hover:text-gray-300">$patience</a>
                <a href="index.html#get-started" class="hover:text-gray-300">tobyworld</a>
                <a href="index.html#whitepaper-section" class="hover:text-gray-300">toadpaper</a>
            </div>
        </nav>
    </div>

    <div id="hero-section">
        <div class="video-container">
            <video id="hero-video" autoplay loop muted playsinline>
                <source src="/video.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="video-overlay"></div>
        </div>
        
        <div class="hero-content">
            <h1 class="text-5xl md:text-6xl font-bold mb-4">TABOSHI</h1>
            <div class="typing-container text-md md:text-lg mb-6 h-6">
                <span id="typed-text"></span>
                <span class="cursor">&nbsp;</span>
            </div>
            <p class="mb-8 text-gray-300 max-w-lg mx-auto text-sm">$TABOSHI is the scarce ‚Äúleaf of yield‚Äù in tobyworld. an erc20z contract on base, forever capped at 185,964. born from a Zora mint in epoch 2, each leaf carries proof of past belief, boosts future staking, and serves as a key to unlock sacred rites across the tobyworld ecosystem.</p>
             <div class="flex flex-col sm:flex-row justify-center items-center gap-3">
                <a href="https://t.me/toadgang" target="_blank" rel="nofollow noreferrer" class="hero-btn w-full sm:w-auto">join telegram</a>
                <a href="https://x.com/toadgod1017" target="_blank" rel="nofollow noreferrer" class="hero-btn w-full sm:w-auto">study the lore</a>
                <a href="index.html#get-started" class="hero-btn w-full sm:w-auto">enter tobyworld</a>
                <a href="index.html#whitepaper-section" class="hero-btn w-full sm:w-auto">read toadpaper</a>
            </div>
            <div class="mt-6 text-white text-sm">
                <span>üîë tobyworld:</span>
                <span class="mx-1"><a href="index.html" class="font-bold underline">$toby</a> üîµ</span>
                <span class="mx-1"><a href="taboshi.html" class="font-bold underline">$taboshi</a> üçÉ</span>
                <span class="mx-1"><a href="patience.html" class="font-bold underline">$patience</a> üî∫</span>
                <span class="font-bold mx-1">$sato üåÄ</span>
            </div>
        </div>
    </div>
    
    <div class="container mx-auto max-w-6xl p-4 sm:p-6 lg:p-8">
        <div id="stats-container">
            <!-- Summary Section -->
            <div id="final-summary-section" class="stat-card">
                 <div id="loading-final-summary" class="text-center text-slate-500 py-10">Fetching data...</div>
                 <div id="error-final-summary" class="hidden text-red-600 text-center py-10"></div>
                 <div id="content-final-summary" class="hidden">
                    <div id="final-summary-token-info" class="flex items-center justify-between mb-4 data-box"></div>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-2 text-center mb-4">
                        <div id="final-summary-price"></div> <div id="final-summary-price-change"></div>
                        <div id="final-summary-holders"></div> <div id="final-summary-holders-change"></div>
                    </div>
                    <div id="final-summary-timeframe-buttons" class="btn-group"></div>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-2 text-center">
                        <div id="final-summary-total-liquidity"></div> <div id="final-summary-volume-24h"></div>
                        <div id="final-summary-total-supply"></div> <div id="final-summary-marketcap"></div>
                        <div id="final-summary-fdv"></div> <div id="final-summary-creation-date"></div>
                    </div>
                    <div id="final-summary-address-container" class="text-center text-xs text-slate-500 break-all mt-4 flex justify-center items-center gap-2"></div>
                 </div>
            </div>
            <!-- Price Chart Section -->
            <div id="multi-timeframe-section" class="stat-card">
                <h2 class="text-xl font-semibold text-slate-800 mb-4">taboshi charts</h2>
                <div id="multi-timeframe-buttons" class="btn-group -mt-2">
                    <button class="timeframe-btn multi-tf-btn" data-timeframe="24h">24h</button> <button class="timeframe-btn multi-tf-btn" data-timeframe="7d">7d</button>
                    <button class="timeframe-btn multi-tf-btn" data-timeframe="30d">30d</button> <button class="timeframe-btn multi-tf-btn" data-timeframe="90d">90d</button>
                    <button class="timeframe-btn multi-tf-btn active" data-timeframe="ALL">ALL</button>
                </div>
                <div id="multi-timeframe-price-change" class="text-center mb-4 data-box">
                    <span id="current-price-display" class="text-2xl font-bold text-slate-800">$0.0</span>
                    <span id="price-change-display" class="ml-3 text-lg font-semibold positive-change">+0.00%</span>
                </div>
                <div id="loading-multi-timeframe" class="text-center text-slate-500 py-10">Fetching chart data...</div>
                <div id="error-multi-timeframe" class="hidden text-red-600 text-center py-10"></div>
                <div id="content-multi-timeframe" class="hidden h-96 w-full">
                     <canvas id="multi-timeframe-chart"></canvas>
                </div>
            </div>
            <!-- Holder Stats Section -->
            <div id="holder-stats-section" class="stat-card">
                 <h2 class="text-xl font-semibold text-slate-800 mb-4">taboshi hodlers info</h2>
                <div id="loading-holder-stats" class="text-center text-slate-500 py-10">Fetching holder data...</div>
                <div id="error-holder-stats" class="hidden text-red-600 text-center py-10"></div>
                <div id="content-holder-stats" class="hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
                        <div class="flex flex-col justify-center items-center text-center data-box">
                            <h3 class="text-sm text-slate-600 mb-2">Total Holders</h3>
                            <p id="total-holders" class="text-3xl font-bold text-slate-800">0</p>
                        </div>
                        <div class="lg:col-span-2">
                             <h3 class="text-sm text-slate-600 mb-2 text-center">Holders by Acquisition</h3>
                             <div class="w-full h-48 flex items-center justify-center">
                                 <canvas id="acquisition-chart"></canvas>
                                 <p id="acquisition-chart-unavailable" class="hidden text-slate-500 text-center">Holder acquisition data is currently unavailable.</p>
                             </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Historical Holders Chart -->
            <div id="holders-historical-section" class="stat-card">
                <h2 class="text-xl font-semibold text-slate-800 mb-4">taboshi hodlers chart</h2>
                <div id="loading-holders-historical" class="text-center text-slate-500 py-10">Fetching historical holder data...</div>
                <div id="error-holders-historical" class="hidden text-red-600 text-center py-10"></div>
                <div id="content-holders-historical" class="hidden h-72 w-full">
                    <canvas id="holders-historical-chart"></canvas>
                </div>
            </div>
            <!-- DEX Pools Section -->
            <div id="dex-pools-section" class="stat-card">
               <h2 class="text-xl font-semibold text-slate-800 mb-4">taboshi dex pools</h2>
               <div id="loading-dex-pools" class="text-center text-slate-500 py-10">Fetching pool data...</div>
               <div id="error-dex-pools" class="hidden text-red-600 text-center py-10"></div>
               <div id="content-dex-pools" class="hidden space-y-4"></div>
            </div>
        </div>
        
        <div id="qa-section" class="text-white max-w-4xl mx-auto py-12 px-4">
            <div class="max-w-3xl mx-auto">
                <h2 class="text-4xl font-bold mb-8 dark-blue-title-box">taboshi questions and answers</h2>
                <h3 class="text-2xl font-bold mb-4 mt-8 dark-blue-title-box">1. what is taboshi and how is it described in the lore?</h3>
                <p class="mb-6">taboshi is a scarce digital asset within the tobyworld ecosystem, described poetically as the "leaf of yield". the lore frames it as a "zora-minted relic" that serves as "proof of past belief" for the most dedicated followers of the project. its narrative purpose is to act as a key that will magnify the holder's share of future rewards, or "tomorrow's harvest". this positions taboshi not as a simple currency, but as a high-tier artifact whose value is tied to future events prophesied in the lore.</p>
                <h3 class="text-2xl font-bold mb-4 mt-8 dark-blue-title-box">2. what is the official contract address for the taboshi token?</h3>
                <p class="mb-6">the official contract address for the taboshi token on the base blockchain is 0x3a1a33cf4553db61f0db2c1e1721cd480b02789f. it is crucial for users to verify this specific address when trading or interacting with the asset on decentralized exchanges.</p>
                <h3 class="text-2xl font-bold mb-4 mt-8 dark-blue-title-box">3. how was taboshi first introduced to the toby community?</h3>
                <p class="mb-6">taboshi was not introduced through a technical document but was instead revealed through cryptic messages in the "toad lore" authored by toadgod1017. the first mention appeared in may 2024, with a prophecy stating that "toad's believers, steadfast and wise, will reap taboshi's yield". this narrative-first approach is a core strategy of the project, requiring participants to study the lore to understand the function and significance of new assets. the introduction was designed to build mystique and attract participants willing to engage deeply with the project's story.</p>
                <h3 class="text-2xl font-bold mb-4 mt-8 dark-blue-title-box">4. what is the purpose of the cryptic and mythological language used to describe taboshi?</h3>
                <p class="mb-6">the esoteric language used in the toad lore serves as a sophisticated filtering mechanism. by avoiding simple technical descriptions and instead using prophecies and metaphors, the project repels casual speculators looking for quick profits. it is designed to attract a specific type of participant who is willing to invest time and effort into "studying" the material to decipher its meaning. this process selects for individuals who exhibit patience and long-term conviction, which are the exact traits the tobyworld ecosystem is designed to reward.</p>
                <h3 class="text-2xl font-bold mb-4 mt-8 dark-blue-title-box">5. what is the zora platform and why is its use significant for the tobyworld ecosystem?</h3>
                <p class="mb-6">zora is an ethereum layer 2 network, built on the op stack, that functions as a universal, permissionless protocol for minting on-chain media. its ethos is centered on empowering creators with low-cost tools and permanent on-chain records for their work. the choice of zora is significant because it aligns perfectly with the toby project's "fair launch" doctrine, which rejects insider deals and vc influence. this platform choice provides a technical foundation for the project's philosophical claims of being decentralized and creator-centric.</p>
                <h3 class="text-2xl font-bold mb-4 mt-8 dark-blue-title-box">6. what is the primary utility of holding taboshi within the tobyworld ecosystem?</h3>
                <p class="mb-6">the primary and most explicitly stated utility of taboshi is to serve as a "boost to future staking". this means that holding the asset is expected to significantly increase the rewards or yield earned when participating in future staking protocols within tobyworld. it is designed as a high-tier reward mechanism for the most committed members of the community. its value is therefore almost entirely forward-looking, dependent on the launch of these future protocols.</p>
                <h3 class="text-2xl font-bold mb-4 mt-8 dark-blue-title-box">7. where is taboshi primarily traded?</h3>
                <p class="mb-6">taboshi is traded exclusively on decentralized exchanges (dexs) operating on the base blockchain. the most active and popular trading venue is uniswap v3 (base), which offers the deepest liquidity for the asset. other platforms like aerodrome also support taboshi trading, ensuring it is accessible within the native base defi ecosystem.</p>
            </div>
        </div>
    </div>
 
    <footer class="text-center text-white text-s py-3 space-y-2">
        <p>üîµüçÉüî∫üåÄ</p>
        <p>made with ‚ù§Ô∏è by <a href="https://x.com/harrytotter7" target="_blank" rel="nofollow noreferrer" class="underline">@harrytotter7</a></p>
        <p> ‚òï dev wallet <a href="https://basescan.com" target="_blank" rel="nofollow noreferrer" class="underline">harrytotter7.base.eth</a></p>
        <p>‚úÖ open source code on <a href="https://github.com" target="_blank" rel="nofollow noreferrer" class="underline">github</a></p>
        <p>üõ°Ô∏è browse this website on <a href="https://xxxx.com" target="_blank" rel="nofollow noreferrer" class="underline">IPFS</a></p>
    </footer>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- HERO TYPING ANIMATION ---
        const typedTextSpan = document.getElementById("typed-text");
        if (typedTextSpan) {
            const textArray = ["a forever decentralised community project.", "this one is for all the fallen frogs.", "toad god toby prophecy on base."];
            const typingDelay = 100, erasingDelay = 50, newTextDelay = 2000;
            let textArrayIndex = 0, charIndex = 0;
            function type() { if (charIndex < textArray[textArrayIndex].length) { typedTextSpan.textContent += textArray[textArrayIndex].charAt(charIndex); charIndex++; setTimeout(type, typingDelay); } else { setTimeout(erase, newTextDelay); } }
            function erase() { if (charIndex > 0) { typedTextSpan.textContent = textArray[textArrayIndex].substring(0, charIndex - 1); charIndex--; setTimeout(erase, erasingDelay); } else { textArrayIndex++; if (textArrayIndex >= textArray.length) textArrayIndex = 0; setTimeout(type, typingDelay + 1100); } }
            setTimeout(type, newTextDelay);
        }
        
        // --- GLOBAL STATE ---
        let launchDate = "2024-01-01T00:00:00.000Z"; // Default, will be updated
        let charts = {}; // To hold chart instances

        // --- UTILITY & FORMATTING FUNCTIONS ---
        const fetchData = async (endpoint, sectionId, params = {}) => {
            const loadingEl = document.getElementById(`loading-${sectionId}`);
            const errorEl = document.getElementById(`error-${sectionId}`);
            const contentEl = document.getElementById(`content-${sectionId}`);
            const tokenName = 'taboshi';
            const urlParams = new URLSearchParams({ endpoint, token: tokenName, ...params }).toString();
            
            if (loadingEl) loadingEl.style.display = 'block';
            if (errorEl) errorEl.classList.add('hidden');
            if (contentEl) contentEl.classList.add('hidden');

            try {
                const response = await fetch(`https://api.toadgang.com/api.php?${urlParams}`);
                if (!response.ok) throw new Error(`API Error: ${response.status} ${response.statusText}`);
                const data = await response.json();
                if (data.error) throw new Error(data.error);

                if (loadingEl) loadingEl.style.display = 'none';
                if (contentEl) contentEl.classList.remove('hidden');
                return data;
            } catch (error) {
                console.error(`Failed to fetch for ${sectionId}:`, error);
                if (loadingEl) loadingEl.style.display = 'none';
                if (errorEl) { errorEl.textContent = `Error: ${error.message}`; errorEl.classList.remove('hidden'); }
                return null;
            }
        };
        
        const formatCurrency = (v, d = 2) => (n => isNaN(n) || n === null ? 'N/A' : `$${n.toLocaleString('en-US', { minimumFractionDigits: d, maximumFractionDigits: d })}`)(parseFloat(v));
        const formatNumber = (v) => (n => isNaN(n) || n === null ? 'N/A' : n.toLocaleString('en-US'))(parseInt(v, 10));
        const formatCompactCurrency = (v) => { const n = parseFloat(v); if (isNaN(n) || n === null || n === 0) return '$0'; if (n >= 1000000) return `$${(n / 1000000).toFixed(1)}M`; if (n >= 1000) return `$${(n / 1000).toFixed(1)}K`; return `$${n.toFixed(0)}`;};
        const formatPercentage = (v) => { const n = parseFloat(v); if (isNaN(n)) return '0.00%'; return `${n >= 0 ? '+' : ''}${n.toFixed(2)}%`;};
        const formatPrice = (v, d = 1) => (n => isNaN(n) || n === null ? '$0.0' : `$${n.toFixed(d)}`)(parseFloat(v));

        // --- UI BUILDER FUNCTIONS ---
        const buildFinalSummaryBox = async (summaryData) => {
            const data = summaryData;
            if (!data || !data.analytics || !data.holders || !data.metadata || !data.dexscreener) return;
            
            const metadata = data.metadata[0];
            const dexscreenerPair = data.dexscreener.pair;
            const creationDate = new Date(metadata.created_at);
            const dayCount = Math.ceil(Math.abs(new Date() - creationDate) / (1000 * 60 * 60 * 24));

            document.getElementById('final-summary-token-info').innerHTML = `<div class="flex items-center"><img src="${metadata.logo || 'https://placehold.co/40x40/e0f2fe/0d43ae?text=?'}" onerror="this.src='https://placehold.co/40x40/e0f2fe/0d43ae?text=?'" class="h-10 w-10 mr-4 rounded-full" alt="Token Logo"><div><p class="font-bold text-slate-800">${metadata.name}</p></div></div><div class="text-right"><p class="font-bold text-slate-800">day ${dayCount} | epoch 4 | season 0 üçÉ</p></div>`;
            
            const createDataBox = (label, value, glowClass = '') => `<div class="data-box ${glowClass}"><div class="text-xs text-slate-600">${label}</div><div class="font-bold text-slate-800">${value}</div></div>`;
            
            document.getElementById('final-summary-price').innerHTML = createDataBox('Price', formatPrice(dexscreenerPair.priceUsd, 1), 'glow-green');
            document.getElementById('final-summary-holders').innerHTML = createDataBox('Holders', formatNumber(data.holders.totalHolders), 'glow-blue');
            document.getElementById('final-summary-total-liquidity').innerHTML = createDataBox('Total Liquidity', formatCompactCurrency(data.analytics.totalLiquidityUsd));
            document.getElementById('final-summary-volume-24h').innerHTML = createDataBox('Volume (24h)', formatCompactCurrency((data.analytics.totalBuyVolume?.['24h'] || 0) + (data.analytics.totalSellVolume?.['24h'] || 0)));
            document.getElementById('final-summary-total-supply').innerHTML = createDataBox('Total Supply', formatNumber(metadata.total_supply_formatted));
            document.getElementById('final-summary-marketcap').innerHTML = createDataBox('Market Cap', formatCompactCurrency(metadata.market_cap));
            document.getElementById('final-summary-fdv').innerHTML = createDataBox('FDV', formatCompactCurrency(metadata.fully_diluted_valuation));
            document.getElementById('final-summary-creation-date').innerHTML = createDataBox('Creation Date', creationDate.toLocaleDateString('en-US'));
            document.getElementById('final-summary-address-container').innerHTML = `<span>${metadata.address}</span><button onclick="copyToClipboard('${metadata.address}', this)" title="Copy address" class="copy-btn"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/></svg></button>`;
            
            const buttonContainer = document.getElementById('final-summary-timeframe-buttons');
            buttonContainer.innerHTML = Object.entries({ '5m': '5m', '1h': '1h', '6h': '6h', '24h': '24h', '7d': '7d', '30d': '30d' }).map(([key, text], i) => `<button class="timeframe-btn ${i === 3 ? 'active' : ''}" data-timeframe="${key}">${text}</button>`).join('');
            
            const updateFinalSummaryUI = async (timeframeKey) => {
                buttonContainer.querySelectorAll('.timeframe-btn').forEach(btn => btn.classList.toggle('active', btn.dataset.timeframe === timeframeKey));
                document.getElementById('final-summary-price-change').innerHTML = createDataBox('Price Change', '...');
                document.getElementById('final-summary-holders-change').innerHTML = createDataBox('Holders Change', '...');

                const holderChangeKey = {'5m':'5min','1h':'1h','6h':'6h','24h':'24h','7d':'7d','30d':'30d'}[timeframeKey] || timeframeKey;
                if(holderChangeKey && data.holders.holderChange && data.holders.holderChange[holderChangeKey]) {
                    const hoData = data.holders.holderChange[holderChangeKey];
                    const holderChangeHTML = `<span class="${hoData.change >= 0 ? 'positive-change' : 'negative-change'}">${hoData.change > 0 ? '+' : ''}${formatNumber(hoData.change)}</span>`;
                    const holderGlowClass = hoData.change >= 0 ? 'glow-green' : 'glow-red';
                    document.getElementById('final-summary-holders-change').innerHTML = createDataBox('Holders Change', holderChangeHTML, holderGlowClass);
                }

                let priceChangeHTML = 'N/A';
                const dsTimeframe = {'5m':'m5','1h':'h1','6h':'h6','24h':'h24'}[timeframeKey];
                if (dsTimeframe && dexscreenerPair.priceChange && dexscreenerPair.priceChange[dsTimeframe] !== undefined) {
                    const change = parseFloat(dexscreenerPair.priceChange[dsTimeframe]);
                    priceChangeHTML = `<span class="${change >= 0 ? 'positive-change' : 'negative-change'}">${formatPercentage(change)}</span>`;
                } else if (['7d', '30d'].includes(timeframeKey)) {
                    try {
                        const days = timeframeKey === '7d' ? 7 : 30;
                        const pastDate = new Date(new Date().getTime() - days * 24 * 60 * 60 * 1000);
                        const toDateForApi = new Date(pastDate.getTime() + (24 * 60 * 60 * 1000));
                        const ohlcvData = await fetchData('ohlcv', 'summary-ohlcv-temp', { timeframe: '1d', fromDate: pastDate.toISOString(), toDate: toDateForApi.toISOString() });
                        if (ohlcvData?.result?.[0]) {
                            const pastPrice = parseFloat(ohlcvData.result[0].close);
                            const currentPrice = parseFloat(dexscreenerPair.priceUsd);
                            if(pastPrice > 0) {
                                const change = ((currentPrice - pastPrice) / pastPrice) * 100;
                                priceChangeHTML = `<span class="${change >= 0 ? 'positive-change' : 'negative-change'}">${formatPercentage(change)}</span>`;
                            }
                        }
                    } catch (e) { priceChangeHTML = 'Error'; }
                }
                const priceGlowClass = priceChangeHTML.includes('positive') ? 'glow-green' : priceChangeHTML.includes('negative') ? 'glow-red' : '';
                document.getElementById('final-summary-price-change').innerHTML = createDataBox('Price Change', priceChangeHTML, priceGlowClass);
            };
            buttonContainer.addEventListener('click', (e) => { if (e.target.classList.contains('timeframe-btn')) updateFinalSummaryUI(e.target.dataset.timeframe); });
            updateFinalSummaryUI('24h');
        };

        const buildMultiTimeframeChart = async (selectedTimeframe = 'ALL') => {
            const now = new Date();
            let fromDate, timeframe;
            switch(selectedTimeframe) {
                case '24h': fromDate = new Date(now.getTime() - 24*60*60*1000); timeframe = '1h'; break;
                case '7d': fromDate = new Date(now.getTime() - 7*24*60*60*1000); timeframe = '1h'; break;
                case '30d': fromDate = new Date(now.getTime() - 30*24*60*60*1000); timeframe = '1d'; break;
                case '90d': fromDate = new Date(now.getTime() - 90*24*60*60*1000); timeframe = '1d'; break;
                default: fromDate = new Date(launchDate); timeframe = '1d'; break;
            }
            const data = await fetchData('ohlcv', 'multi-timeframe', { timeframe: timeframe, fromDate: fromDate.toISOString(), toDate: now.toISOString() });
            
            if (!data || !data.result || data.result.length === 0) {
                updatePriceChangeDisplay([]); return;
            }
            updatePriceChangeDisplay(data.result);
            if (charts.price) charts.price.destroy();
            
            charts.price = new Chart(document.getElementById('multi-timeframe-chart').getContext('2d'), {
                type: 'line', data: { labels: data.result.map(d => d.timestamp), datasets: [{ label: 'Price (USD)', data: data.result.map(d => d.close), borderColor: '#0d43ae', backgroundColor: 'rgba(13,67,174,0.1)', fill: true, tension: 0.3, pointRadius: 0, }] },
                options: { responsive: true, maintainAspectRatio: false, scales: { x: { type: 'time', time: { unit: selectedTimeframe === '24h' || selectedTimeframe === '7d' ? 'hour' : 'day' }, grid: { color: 'rgba(59,170,255,0.2)' }, ticks: { color: '#334155' } }, y: { grid: { color: 'rgba(59,170,255,0.2)' }, ticks: { color: '#334155', callback: v => formatPrice(v, 1) } } }, plugins: { legend: { display: false }, tooltip: { enabled: true, intersect: false, mode: 'index', callbacks: { title: c => new Date(c[0].parsed.x).toLocaleString(), label: c => `Price: ${formatPrice(c.parsed.y, 1)}` } } } }
            });
        };
        
        const updatePriceChangeDisplay = (priceData) => {
            const currentPriceEl = document.getElementById('current-price-display');
            const priceChangeEl = document.getElementById('price-change-display');
            if (!priceData || priceData.length === 0) { currentPriceEl.textContent = '$0.0'; priceChangeEl.textContent = '+0.00%'; priceChangeEl.className = 'ml-3 text-lg font-semibold positive-change'; return; }
            const sortedData = [...priceData].sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));
            const currentPrice = parseFloat(sortedData[sortedData.length - 1].close);
            currentPriceEl.textContent = formatPrice(currentPrice, 1);
            if (sortedData.length > 1) {
                const startingPrice = parseFloat(sortedData[0].close);
                if (startingPrice > 0) {
                    const priceChange = ((currentPrice - startingPrice) / startingPrice) * 100;
                    priceChangeEl.textContent = formatPercentage(priceChange);
                    priceChangeEl.className = `ml-3 text-lg font-semibold ${priceChange >= 0 ? 'positive-change' : 'negative-change'}`;
                }
            }
        };

        const fetchHolderStats = async () => {
            const data = await fetchData('holders_stats', 'holder-stats');
            const canvasEl = document.getElementById('acquisition-chart');
            const unavailableEl = document.getElementById('acquisition-chart-unavailable');

            if (!data || !data.totalHolders) {
                document.getElementById('total-holders').textContent = 'N/A';
                if(canvasEl) canvasEl.style.display = 'none';
                if(unavailableEl) unavailableEl.classList.remove('hidden');
                return;
            }
            
            document.getElementById('total-holders').textContent = formatNumber(data.totalHolders);

            if (data.holdersByAcquisition && Object.keys(data.holdersByAcquisition).length > 0) {
                if(unavailableEl) unavailableEl.classList.add('hidden');
                if(canvasEl) canvasEl.style.display = 'block';
                
                if (charts.acquisition) charts.acquisition.destroy();
                
                charts.acquisition = new Chart(canvasEl.getContext('2d'), {
                    type: 'doughnut', data: { labels: Object.keys(data.holdersByAcquisition).map(k => k.charAt(0).toUpperCase() + k.slice(1)), datasets: [{ label: 'Number of Holders', data: Object.values(data.holdersByAcquisition), backgroundColor: ['#0d43ae', '#3baaff', '#60a5fa'], borderColor: 'rgba(255,255,255,0.5)', borderWidth: 1 }] },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'right', labels: { color: '#334155', boxWidth: 15, padding: 20 } } } }
                });
            } else {
                if(canvasEl) canvasEl.style.display = 'none';
                if(unavailableEl) unavailableEl.classList.remove('hidden');
            }
        };

        const buildHoldersHistoricalChart = async () => { 
            const toDate = new Date();
            const fromDate = new Date(launchDate);
            const data = await fetchData('holders_historical', 'holders-historical', { fromDate: fromDate.toISOString(), toDate: toDate.toISOString() });
            
            if (!data || !data.result || data.result.length === 0) return; 
            if(charts.historical) charts.historical.destroy(); 
            
            charts.historical = new Chart(document.getElementById('holders-historical-chart').getContext('2d'), {
                type: 'line', data: { labels: data.result.map(d => d.timestamp), datasets: [{ label: 'Total Holders', data: data.result.map(d => d.totalHolders), borderColor: '#0d43ae', backgroundColor: 'rgba(13, 67, 174, 0.1)', fill: true, tension: 0.3, pointRadius: 0, }] },
                options: { responsive: true, maintainAspectRatio: false, scales: { x: { type: 'time', time: { unit: 'day' }, grid: { color: 'rgba(59,170,255,0.2)' }, ticks: { color: '#334155' } }, y: { grid: { color: 'rgba(59,170,255,0.2)' }, ticks: { color: '#334155', callback: v => formatNumber(v) } } }, plugins: { legend: { display: false }, tooltip: { enabled: true, intersect: false, mode: 'index', callbacks: { title: c => new Date(c[0].parsed.x).toLocaleDateString(), label: c => `Holders: ${formatNumber(c.parsed.y)}` } } } }
            }); 
        };

        const buildDexPools = async () => {
            const data = await fetchData('dex_pools', 'dex-pools');
            if (!data || !data.pools) return;
            
            const container = document.getElementById('content-dex-pools');
            const dexInfoMap = { 'Uniswap v2': { name: 'Uniswap v2', logo: 'https://cdn.moralis.io/eth/0x1f9840a85d5af5bf1d1762f925bdaddc4201f984.png' }, 'Uniswap v3': { name: 'Uniswap v3', logo: 'https://cdn.moralis.io/eth/0x1f9840a85d5af5bf1d1762f925bdaddc4201f984.png' }, 'SushiSwap v3': { name: 'SushiSwap v3', logo: 'https://cdn.moralis.io/eth/0x6b3595068778dd592e39a122f4f5a5cf09c90fe2.png' }, 'Aerodrome': { name: 'Aerodrome', logo: 'https://icons.llamao.fi/icons/protocols/aerodrome-finance?w=48&h=48' } };

            if (data.pools.length === 0) {
                container.innerHTML = `<p class="text-slate-500 text-center">Could not fetch data for the specified DEX pools.</p>`;
            } else {
                const getBuyUrl = (exchangeName, tokenAddress) => {
                    const name = (exchangeName || '').toLowerCase();
                    if (name.includes('uniswap')) return `https://app.uniswap.org/swap?outputCurrency=${tokenAddress}&chain=base`;
                    if (name.includes('sushi')) return `https://www.sushi.com/swap?token0=NATIVE&token1=${tokenAddress}&chainId=8453`;
                    if (name.includes('aerodrome')) return `https://aerodrome.finance/swap?from=eth&to=${tokenAddress}`;
                    return '#';
                };
                const tokenAddress = '0x3A1a33cf4553Db61F0db2c1e1721CD480b02789f'; // Taboshi address for buy links
                const html = data.pools.map(pool => {
                    const dex = dexInfoMap[pool.customDexName];
                    const buyUrl = getBuyUrl(dex?.name, tokenAddress);
                    const creationDate = pool.pairCreated ? new Date(pool.pairCreated).toLocaleDateString() : 'N/A';
                    return `<div class="data-box p-4 grid grid-cols-1 md:grid-cols-6 gap-4 items-center"> <div class="flex items-center space-x-3"> <img src="${dex?.logo || 'https://placehold.co/24x24/e0f2fe/0d43ae?text=?'}" class="h-6 w-6 rounded-full" alt="DEX Logo"> <div> <div class="text-xs text-slate-600">DEX</div> <div class="font-bold text-slate-800">${dex?.name || 'N/A'}</div> </div> </div> <div> <div class="text-xs text-slate-600">Pair</div> <div class="font-bold text-slate-800">${pool.pairLabel || 'N/A'}</div> </div> <div> <div class="text-xs text-slate-600">Liquidity</div> <div class="font-bold text-slate-800">${formatCurrency(pool.totalLiquidityUsd, 0)}</div> </div> <div> <div class="text-xs text-slate-600">Created</div> <div class="font-bold text-slate-800">${creationDate}</div> </div> <div class="md:col-span-1 text-xs text-slate-600 break-all"> <div class="flex items-center"> <button onclick="copyToClipboard('${pool.pairAddress}', this)" title="Copy pair address" class="copy-btn"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/></svg></button> <span>${pool.pairAddress}</span> </div> </div> <div class="md:col-span-1 text-center md:text-right"> <a href="${buyUrl}" target="_blank" rel="nofollow noreferrer" class="buy-btn">Buy Now</a> </div> </div>`;
                }).join('');
                container.innerHTML = html;
            }
        };

        const initializeDashboard = async () => { 
            const summaryData = await fetchData('summary', 'final-summary');
            if (summaryData?.metadata?.[0]?.created_at) {
                launchDate = summaryData.metadata[0].created_at;
            } else {
                 document.getElementById('error-final-summary').textContent = 'Error: Could not load initial token data.';
                 document.getElementById('error-final-summary').classList.remove('hidden');
                 document.getElementById('loading-final-summary').style.display = 'none';
                 return;
            }
            
            buildFinalSummaryBox(summaryData);

            document.querySelectorAll('.multi-tf-btn').forEach(button => button.addEventListener('click', (e) => {
                document.querySelectorAll('.multi-tf-btn').forEach(btn => btn.classList.remove('active'));
                e.target.classList.add('active');
                buildMultiTimeframeChart(e.target.dataset.timeframe);
            }));

            Promise.all([ 
                buildMultiTimeframeChart('ALL'), 
                fetchHolderStats(), 
                buildHoldersHistoricalChart(), 
                buildDexPools()
            ]).catch(error => console.error('Error initializing dashboard widgets:', error));
        };

        initializeDashboard();
    });

    function copyToClipboard(text, buttonElement) {
        const textArea = document.createElement("textarea");
        textArea.value = text;
        textArea.style.position = "fixed"; 
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        try {
            document.execCommand('copy');
            const originalIcon = buttonElement.innerHTML;
            buttonElement.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="text-green-600" viewBox="0 0 16 16"><path d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022z"/></svg>`;
            setTimeout(() => { buttonElement.innerHTML = originalIcon; }, 2000);
        } catch (err) { console.error('Failed to copy text: ', err); }
        document.body.removeChild(textArea);
    }
</script>
</body>
</html>

